version: 1.0
runtime: nodejs18
build:
  commands:
    - npm install
run:
  port: 3020
  start:
    command: node index.js
  environment:
    - COMPANION_SECRET=${COMPANION_SECRET}
    - COMPANION_PROTOCOL=${COMPANION_PROTOCOL}
    - COMPANION_DOMAIN=${COMPANION_DOMAIN}
    - COMPANION_CLIENT_ORIGINS=${COMPANION_CLIENT_ORIGINS}
    - COMPANION_DATADIR=/tmp/uploads
    - COMPANION_DROPBOX_KEY=${COMPANION_DROPBOX_KEY}
    - COMPANION_DROPBOX_SECRET=${COMPANION_DROPBOX_SECRET}
    - COMPANION_GOOGLE_KEY=${COMPANION_GOOGLE_KEY}
    - COMPANION_GOOGLE_SECRET=${COMPANION_GOOGLE_SECRET}
    - COMPANION_ONEDRIVE_KEY=${COMPANION_ONEDRIVE_KEY}
    - COMPANION_ONEDRIVE_SECRET=${COMPANION_ONEDRIVE_SECRET}
    - PORT=3020
  cpu: 0.25 vCPU
  memory: 0.5 GB
  autoScalingConfiguration:
    minSize: 1
    maxSize: 1
    maxConcurrency: 10 